/*!
****************************************************************************************************
* 文件名称：crc-sample.c
* 功能简介：该文件是公共库CRC校验模块的示例源文件
* 文件作者：Haotian
* 创建日期：2020-09-30
* 版权声明：All Rights Reserved.
****************************************************************************************************
*/
#include <hqhp/crypto/crc.h>

/*!
****************************************************************************************************
* 常量定义
****************************************************************************************************
*/

/*!
****************************************************************************************************
* 类型定义
****************************************************************************************************
*/

/*!
****************************************************************************************************
* 全局变量
****************************************************************************************************
*/

/*!
****************************************************************************************************
* 本地声明
****************************************************************************************************
*/

/*!
****************************************************************************************************
* 接口函数
****************************************************************************************************
*/
/*!
****************************************************************************************************
* 功能描述：
* 注意事项：
* 输入参数：
* 输出参数：
* 返回参数：
****************************************************************************************************
*/
int main(int argc, const char* argv[])
{
	size_t i;
	uint32_t crcResult;
	static uint8_t data[256];

	for (i = 0; i < sizeof(data); i++) {
		data[i] = i;
	}

	// 计算整个数据包
	crcResult = CRC_Compute(CRC16_MODBUS, data, sizeof(data));
	crcResult = CRC_ComputeComplete(CRC16_MODBUS, crcResult);

	// 将数据包拆分为多个包计算，常用于通信，比如每次接收到数据包的一部分后进行校验，可以避免在整个
	// 数据包接收完后再计算整个数据包，造成CPU使用率突然增高
	crcResult = CRC_Compute(CRC16_MODBUS, &data[0], 100);
	crcResult = CRC_ComputePart(CRC16_MODBUS, crcResult, &data[100], sizeof(data) - 100);
	crcResult = CRC_ComputeComplete(CRC16_MODBUS, crcResult);

	return 0;
}

/*!
****************************************************************************************************
* 本地函数
****************************************************************************************************
*/
/*!
****************************************************************************************************
* 功能描述：
* 注意事项：
* 输入参数：
* 输出参数：
* 返回参数：
****************************************************************************************************
*/
